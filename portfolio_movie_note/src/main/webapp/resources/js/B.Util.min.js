/*! Brunch-Web 2019-06-24 */
window.B.Util={ajax:function(a){var b={type:"post",dataType:"json",xhrFields:{withCredentials:!0}};jQuery.userAgent.browser.msie&&jQuery.userAgent.browser.version.major<10&&(b.dataType="jsonp",b.jsonp="callback");var c=jQuery.extend(b,a);if(c.method=c.method||c.type,void 0===c.type||"get"!=c.type.toLowerCase()){var d=jQuery("meta[name=secureToken]").attr("value"),e=function(a){a.setRequestHeader("X-CSRF-TOKEN",d)};c.beforeSend=e}(new Date).getTime();if(jQuery.userAgent.browser.msie&&jQuery.userAgent.browser.version.major<11&&"get"!=c.method.toLowerCase())return void B.Util.alert("지원되지 않는 브라우저입니다.\n최신 브라우저를 사용해주세요.\n(IE11+, Chrome, Firefox, Safari)");var f=c.success,g=c.error;jQuery.ajax(jQuery.extend(c,{success:function(a){if(200==a.code){if(B.isDebug()){c.method,(new Date).getTime(),c.url}f&&f.apply(null,arguments)}else this.error(a)},error:function(a){if(B.isDebug()){c.url}if(!g||g&&!g.apply(null,arguments)){var b=a.code||a.status;401!=b&&605!=b||B.Util.signin(window.location.href)}}}))},ajaxCommonError:function(a){var b=a.code||a.status;401!=b&&605!=b&&alert("오류가 발생했습니다.")},signin:function(a){window.location.href="/signin"+(a?"?url="+encodeURIComponent(a):"")},escapeHTML:function(a){return jQuery("<div>").text(a).html()},setTimeoutForT:function(a,b,c){return window.setTimeout(jQuery.proxy(a,c),b)},setIntervalForT:function(a,b,c){return window.setInterval(jQuery.proxy(a,c),b)},getTemplate:function(a,b){if(Handlebars.template&&B.Templates&&B.Templates[a])return B.Templates[a](b)},brunchDate:function(a){var b={now:function(){return"방금"},minutes:function(a){return Math.floor(a/60)+"분전"},hours:function(a){return Math.floor(a/3600)+"시간전"},date:function(a){var b=new Date(a);return B.Util.dateFormat(b,"N dd. yyyy")}},c=(new Date).getTime(),d=(c-a)/1e3;return d<60&&b.now()||d<3600&&b.minutes(d)||d<34560&&b.hours(d)||b.date(a)},layer:{layerBaseId:"brunchLayerBase",showLayerBase:function(){var a=jQuery("#"+this.layerBaseId);return jQuery(document.body).addClass("of_h"),a[0]?a.show():(a=jQuery('<div class="brunch_layer" id='+this.layerBaseId+"></div>"),jQuery("body").append(a)),a},hideLayerBase:function(){return jQuery(document.body).removeClass("of_h"),jQuery("#"+this.layerBaseId).hide()}},dateFormat:function(){var a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],b=function(b){var c={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds(),N:a[this.getMonth()]};/(y+)/.test(b)&&(b=b.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var d in c)new RegExp("("+d+")").test(b)&&(b=b.replace(RegExp.$1,1==RegExp.$1.length?c[d]:("00"+c[d]).substr((""+c[d]).length)));return b};return function(a,c){return b.call(a,c)}}(),alert:function(a){alert(a)},confirm:function(a,b){var b=b||function(a){};b(!!confirm(a))},numberFormat:function(a,b){var c="\\d(?=(\\d{"+(b||3)+"})+$)";return(a+"").replace(new RegExp(c,"g"),"$&,")},numberCutFormat:function(a){var b=a+"";return a>=1e4?(b=Math.round(a/1e3)+"",b=b.replace(/(\d+)(\d)/,"$1.$2만").replace(/\.0/g,"")):a>0&&a<1e4?B.Util.numberFormat(a):0==a?"":b},hangulToJaso:function(a){for(var b=[12593,12594,12596,12599,12600,12601,12609,12610,12611,12613,12614,12615,12616,12617,12618,12619,12620,12621,12622],c=[12623,12624,12625,12626,12627,12628,12629,12630,12631,12632,12633,12634,12635,12636,12637,12638,12639,12640,12641,12642,12643],d=[0,12593,12594,12595,12596,12597,12598,12599,12601,12602,12603,12604,12605,12606,12607,12608,12609,12610,12612,12613,12614,12615,12616,12618,12619,12620,12621,12622],e=[],f=[],g=0;g<a.length;g++)if(e[g]=a.charCodeAt(g),e[g]>=44032&&e[g]<=55203){var h,i,j;j=e[g]-44032,h=j/588,j%=588,i=j/28,j%=28,f.push(String.fromCharCode(b[parseInt(h)])),f.push(String.fromCharCode(c[parseInt(i)])),0!=j&&f.push(String.fromCharCode(d[parseInt(j)]))}else f.push(String.fromCharCode(e[g]));return f.join("")},trim:function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},smoothScroll:function(a,b){return function(c){if(a&&a.hash){var d,e=c(a.hash);if(e=e.length?e:c("[name="+a.hash.slice(1)+"]"),e.length)return d=e.offset().top,b&&(d-=b),c("html,body").animate({scrollTop:d},500),!1}}(jQuery)},zeroPad:function(a,b){if(isNaN(a))return a;var c=a+"";return c.length>b?a:new Array(b-c.length+1).join("0")+c},getWeekday:function(a){return["일","월","화","수","목","금","토"][a.getDay()]},socialShare:{builder:{twitter:{hash:function(){return encodeURIComponent("브런치")},text:function(a){return encodeURIComponent(a)}}},services:{twitter:{url:"https://twitter.com/intent/tweet",param:"url",prefix:jQuery("#articleShareTitle").val()},facebook:{url:"https://www.facebook.com/dialog/share",urlOption:"https://www.facebook.com/dialog/feed",param:"href",paramOption:"link",options:function(a){return"&display=popup&app_id=313683402170826"}},kakaostory:{url:"https://story.kakao.com/share",param:"url"},talkprofile:{url:B.Config.apiUrl+"/v1/social/talkprofile/post"},kakaotalk:{makeContext:function(a){var b=jQuery(a.currentTarget),c={src:"https://t1.daumcdn.net/brunch/static/img/help/pc/img_share_default_800.png",width:800,height:400},d=b.data("image"),e={prefix:b.data("prefix"),description:b.data("description"),link:b.data("link"),appContext:b.data("appcontext"),image:""==d?c:d},f=b.data("list");return void 0!==f&&""!=f&&(e.objectType="list",e.listContents=f,e.headerImageUrl=b.data("header-image"),e.headerTitle=b.data("header-title")),e}}},popupSize:{w:600,h:400},share:function(a){var b=jQuery(a.target).data("servicename")||jQuery(a.currentTarget).data("servicename"),c=this.services[b];if(!b||!c)return!1;var d=window.location.href.split("#")[0],e=jQuery(a.target).data("articleno")||jQuery(a.currentTarget).data("articleno")||"",f=jQuery(a.target).data("text")||jQuery(a.currentTarget).data("text")||c.prefix,g="",h=jQuery(a.target).data("targeturl")||jQuery(a.currentTarget).data("targeturl");h&&(d=h),c.options&&(g=c.options(e,f));var i=c.url,j=c.param;switch("facebook"==b&&c.options&&e&&(i=c.urlOption,j=c.paramOption),b){case"talkprofile":B.Util.ajax({url:i,type:"POST",data:{articleNo:e},success:function(a){alert("공유했습니다!\n브런치 계정과 연결된 [카카오톡 앱] > [프로필 홈]에서 공유한 글을 확인하실 수 있습니다.")},error:function(a){alert("일시적 문제로 공유되지 않았습니다.\n잠시 후 다시 시도해 주세요.")}});break;case"kakaotalk":try{Kakao.init(B.Config.kakaoJSKey)}catch(a){}var k=this.services.kakaotalk.makeContext(a),l=B.getKakaoLinkData(k);Kakao.Link.sendDefault(l);break;default:var m=this.popupSize,n=m.w,o=m.h,p=i+"?"+j+"="+encodeURIComponent(d)+g;window.open(p,c,"width="+n+", height="+o+",resizable=yes,scrollbars=yes")}}},bezier:function(a,b,c,d,e){var f=function(b){var d=1-b;return 3*d*d*b*a+3*d*b*b*c+b*b*b},g=function(a){var c=1-a;return 3*c*c*a*b+3*c*a*a*d+a*a*a},h=function(b){var d=1-b;return 3*(2*(b-1)*b+d*d)*a+3*(-b*b*b+2*d*b)*c};return function(a){var b,c,d,i,j,k,l=a;for(d=l,k=0;k<8;k++){if(i=f(d)-l,Math.abs(i)<e)return g(d);if(j=h(d),Math.abs(j)<1e-6)break;d-=i/j}if(b=0,c=1,d=l,d<b)return g(b);if(d>c)return g(c);for(;b<c;){if(i=f(d),Math.abs(i-l)<e)return g(d);l>i?b=d:c=d,d=.5*(c-b)+b}return g(d)}},localStorage:{isEnable:function(){return!(!window.localStorage||!window.localStorage.getItem)},set:function(a,b){if(!window.localStorage||!window.localStorage.setItem)return!1;try{return window.localStorage.setItem(a,b)}catch(c){return this.isStorageQuotaExceeded(c)&&window.localStorage.clear(),!1}},get:function(a){return!(!window.localStorage||!window.localStorage.getItem)&&window.localStorage.getItem(a)},remove:function(a){return!(!window.localStorage||!window.localStorage.removeItem)&&window.localStorage.removeItem(a)}},sessionStorage:{isEnable:function(){return!(!window.sessionStorage||!window.sessionStorage.getItem)},set:function(a,b){if(!window.sessionStorage||!window.sessionStorage.setItem)return!1;try{return window.sessionStorage.setItem(a,b)}catch(c){return this.isStorageQuotaExceeded(c)&&window.sessionStorage.clear(),!1}},get:function(a){return!(!window.sessionStorage||!window.sessionStorage.getItem)&&window.sessionStorage.getItem(a)},remove:function(a){return!(!window.sessionStorage||!window.sessionStorage.removeItem)&&window.sessionStorage.removeItem(a)}},isStorageQuotaExceeded:function(a){return a instanceof DOMException&&(22===a.code||1014===a.code||"QuotaExceededError"===a.name||"NS_ERROR_DOM_QUOTA_REACHED"===a.name)&&storage&&0!==storage.length},getResetHeightInstance:function(a){return new function(a){this.razyReset=function(){this.$resetDummy&&this.$resetDummy.length>0&&this.$resetDummy.remove(),this.$resetDummy=jQuery("<div></div>").appendTo(document.body),this.$resetDummy.css({position:"fixed",top:0,left:0,right:0,bottom:0,"z-index":-1}),this.razyResetTimer(100,10)},this.razyResetTimer=function(b,c){this.resetDummyTimer=setInterval(jQuery.proxy(function(){0==c&&this.clearResetTimer(),this.$resetDummy&&this.$resetDummy.length>0&&a&&a(this.$resetDummy.height()),c--},this),b)},this.clearResetTimer=function(){this.resetDummyTimer&&(clearTimeout(this.resetDummyTimer),this.resetDummyTimer=null),this.$resetDummy&&(this.$resetDummy.remove(),this.$resetDummy=null)}}(a).razyReset()},mozilaForceKeyup:function(a){var b,a=jQuery(a);if(jQuery.userAgent.browser.firefox)return b=null,a.on("keydown",function(c){var d=function(){return a.trigger("keyup")};if(!b)return b=setInterval(d,100)}),a.on("blur",function(a){if(b)return clearInterval(b),b=null})},inputTypingHandler:function(a,b,c){var d,a=jQuery(a),e=this.mozilaForceKeyup(a),f=function(f){var g=f.target.value;c&&(g=jQuery.trim(g)),d!=g&&(b(a,g),d=g),window.clearInterval(e)};a.on("keyup",f)},clearLocationHash:function(){var a=window.location.toString();if(a.indexOf("#")>0){var b=a.substring(0,a.indexOf("#"));if("replaceState"in history)window.history.replaceState({},document.title,b);else{var c,d,e=window.location;c=document.body.scrollTop,d=document.body.scrollLeft,e.hash="",document.body.scrollTop=c,document.body.scrollLeft=d}}},clearLocationQueryString:function(){try{history.replaceState({},document.title,location.pathname)}catch(a){}},removeParameter:function(a,b){var c=b.split("?")[0],d=[],e=-1!==b.indexOf("?")?b.split("?")[1]:"";if(""!==e){d=e.split("&");for(var f=d.length-1;f>=0;f-=1)d[f].split("=")[0]===a&&d.splice(f,1);d.length>0&&(c=c+"?"+d.join("&"))}return c},getSelection:function(){return window.getSelection?window.getSelection():document.getSelection?document.getSelection():document.selection.createRange()},delayLoop:function(a,b,c,d,e){var f=function(){b(a[d],d),d++,--c&&B.Util.delayLoop(a,b,c,d,e)};0==e||0==d?f():setTimeout(f,e)},stringify:function(a){return JSON.stringify(a,null,4)},isMobile:function(){return"mobile"==jQuery.userAgent.platform},isPc:function(){return!B.Util.isMobile()},getParams:function(a){var b={};if(a){var c=a.indexOf("?")+1;if(c<=a.length){a=a.substring(c,a.length);var d=a.split("&");for(var e in d){var f=d[e],g=f.split("="),h="";2==g.length&&(h=decodeURIComponent(g[1])),b[g[0]]=h}}}return b},changeOpenGraph:function(){var a="daumcdn.net/thumb/C400x400/?fname=",b=this.isMobile()?"C200x280":"C400x560",c=this;jQuery(".wrap_item.item_type_opengraph").each(function(d,e){var f=jQuery(e),g=f.data("app");if("opengraph"==g.type){g=g.openGraphData;var h=g.canonicalUrl,i=g.image,j=c.isBookstoreUrl(h),k=!0;if(0!==j){if(-1===j){var l=g.description;if(l&&l.match(/^\d{4}-\d{2}-\d{2}:/)){var m=l.match(/^\d{4}-\d{2}-\d{2}/)[0],n=new Date(m);"Invalid Date"!=n&&(n.setHours(0),n.setDate(n.getDate()+1),(new Date).getTime()>n.getTime()&&(k=!1))}}f.addClass("opengraph_book"),k?f.find(".inner_wrap_text").append(jQuery('<span class="buy_btn">구매하기</span>')):f.find(".inner_wrap_text").append(jQuery('<span class="buy_btn buy_end_btn">구매마감</span>'));var o=i.indexOf(a);if(-1!=o){var p=i.substring(o+a.length),q="//img1.daumcdn.net/thumb/"+b+"/?fname="+p;f.find(".inner_wrap_og_image").css("background-image","url("+q+")")}f.find(".inner_wrap").attr("data-ctr-expose","book_opengraph"),f.find(".inner_wrap").attr("data-ctr-click","book_opengraph_click")}else f.find(".inner_wrap").attr("data-ctr-expose","opengraph"),f.find(".inner_wrap").attr("data-ctr-click","opengraph_click")}})},isBookstoreUrl:function(a){for(var b=[/https?:\/\/storyfunding\.kakao\.com\/support\/\d+\/step1/,/https?:\/\/www\.kyobobook\.co\.kr\/redi_book\.jsp\?b=\d+/,/https?:\/\/www\.yes24\.com\/24\/goods\/\d+/,/https?:\/\/www\.aladin\.co\.kr\/shop\/wproduct\.aspx\?ItemId=\d+/,/https?:\/\/ridibooks\.com\/v2\/Detail\?id=\d+/,/https?:\/\/book\.interpark\.com\/product\/BookDisplay\.do\?_method=detail.*&sc\.prdNo=\d+/,/https?:\/\/brunch\.co\.kr\/publish\/book\/\d+/],c=b.length,d=0;d<c;d++)if(b[d].test(a))return 0==d?-1:1;return 0},convertReadSeconds:function(a){return a<60?1:Math.round(a/60)}};